function drawLinks() {
  ctx.save();
  ctx.lineWidth = 1.1;

  // Анимируем появление связей
  for (const link of links) {
    if (link.progress < 1) link.progress += 0.08;
    if (link.progress > 1) link.progress = 1;

    const { a, b, progress, eqAlpha = 1 } = link;
    const x1 = a.x, y1 = a.y;
    const x2 = a.x + (b.x - a.x) * progress;
    const y2 = a.y + (b.y - a.y) * progress;

    const alpha = 0.18 * eqAlpha; // 0.18 — базовая прозрачность, умножаем на EQ
    ctx.strokeStyle = `rgba(255,255,255,${alpha})`;

    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
  }

  // Анимируем разрыв связей
  for (let i = breakingLinks.length - 1; i >= 0; i--) {
    const link = breakingLinks[i];
    link.progress -= 0.08;
    if (link.progress <= 0) {
      breakingLinks.splice(i, 1);
      continue;
    }
    const { a, b, progress, eqAlpha = 1 } = link;
    const x1 = a.x, y1 = a.y;
    const x2 = a.x + (b.x - a.x) * progress;
    const y2 = a.y + (b.y - a.y) * progress;

    const alpha = 0.18 * eqAlpha;
    ctx.strokeStyle = `rgba(255,255,255,${alpha})`;

    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
  }

  ctx.restore();
}
